# This file is dynamically generated. Do not edit.

# This file defines the VPN client certificates for users authorized to access this account.
# Certificates are generated and managed as Terraform resources to ensure idempotency.
# The generated .key and .crt files are stored locally in the .client_vpn_configs/ directory.

{% for user in vpn_users %}
module "vpn_client_{{ user.user_name | replace('.', '_') | replace('@', '_') }}" {
  source = "../../../modules/vpc-vpn-client"

  user_name          = "{{ user.user_name }}"
  organization       = var.cert_organization
  ca_private_key_pem = module.vpc_vpn.ca_private_key_pem
  ca_certificate_pem = module.vpc_vpn.ca_certificate_pem
  output_path        = "${path.module}/../../../.client_vpn_configs/{{ account_alias }}"
}
{% endfor %}
